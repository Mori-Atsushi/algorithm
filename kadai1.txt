Script started on Wed Nov 18 22:25:00 2015
[?1034hbash-3.2$ cat stack.c
/* E1237 æ£®ç¯¤å² */

#include <stdio.h>
#include <stdlib.h>

typedef struct cell {
	int item;
	struct cell *next;
} cell_t;

/*ãƒ¡ãƒ¢ãƒªç¢ºä¿*/
cell_t *lalloc(void) {
	return (cell_t *)malloc(sizeof(cell_t));
}

/*å…ˆé ­ã«ãƒ‡ãƒ¼ã‚¿æŒ¿å…¥*/
cell_t *push(int x, cell_t *top) {
	cell_t *p;
	p = lalloc();
	p->item = x;
	p->next = top;
	return(p);
}

/*å…ˆé ­ã®ãƒ‡ãƒ¼ã‚¿ã‚’å–ã‚Šå‡ºã™*/ 
cell_t *pop(cell_t *top) {
	int x;

	x = top->item;
	top = top->next;
	printf("%d, ", x);

	return (top);
}

/*iã‚³ãƒãƒ³ãƒ‰*/
cell_t *i(cell_t *top) {
	int x;
	printf("å…¥åŠ›ãƒ‡ãƒ¼ã‚¿ï¼š");
	scanf(" %d", &x);
	return push(x, top);
}

/*dã‚³ãƒãƒ³ãƒ‰*/
cell_t *d(cell_t *top) {
	cell_t *tmp;

	if(top == NULL) {
		printf("ã‚¹ã‚¿ãƒƒã‚¯ã¯ç©ºã§ã™ã€‚\n");
		return top;
	}

	tmp = top->next;
	free(top);

	return tmp;
}

/*mã‚³ãƒãƒ³ãƒ‰*/
cell_t *m(cell_t *top) {
	cell_t *tmp = top, *next;
	int i, x;

	if(top == NULL) {
		printf("ã‚¹ã‚¿ãƒƒã‚¯ã¯ç©ºã§ã™ã€‚\n");
		return top;
	}

	printf("å‰Šé™¤æ•°ï¼š");
	scanf(" %d", &x);
	for(i = 0; i < x; i++) {
		next = tmp->next;
		free(tmp);
		tmp = next;

		if(tmp == NULL) {
			printf("ã‚¹ã‚¿ãƒƒã‚¯ãŒç©ºã«ãªã‚Šã¾ã—ãŸã€‚\n");
			return tmp;
		}
	}
	return tmp;
}

/*pã‚³ãƒãƒ³ãƒ‰*/
void p(cell_t *top) {
	cell_t *tmp;
	if(top == NULL) {
		printf("ã‚¹ã‚¿ãƒƒã‚¯ã¯ç©ºã§ã™ã€‚\n");
		return ;
	}
	tmp = top;
	while(tmp != NULL) {
		tmp = pop(tmp);
	}
	printf("\n");
}

int main(void) {
	cell_t *top = NULL; //ã‚¹ã‚¿ãƒƒã‚¯ã®å…ˆé ­
	char c;
	int x;

	while(1) {
		printf("ã‚³ãƒãƒ³ãƒ‰ï¼š");
		scanf(" %c", &c);
		switch(c) {
			case 'i':
				top = i(top);
				break;
			case 'd':
				top = d(top);
				break;
			case 'm':
				top = m(top);
				break;
			case 'p':
				p(top);
				break;
			case 'q':
				return 0;
			default :
				printf("å…¥åŠ›ã¯i,d,m,p,qã®ã„ãšã‚Œã‹ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚\n");
		}
	}

	return 0;
}bash-3.2$ gcc stack.c
bash-3.2$ ./a.out
ã‚³ãƒãƒ³ãƒ‰ï¼šp
ã‚¹ã‚¿ãƒƒã‚¯ã¯ç©ºã§ã™ã€‚
ã‚³ãƒãƒ³ãƒ‰ï¼šd
ã‚¹ã‚¿ãƒƒã‚¯ã¯ç©ºã§ã™ã€‚
ã‚³ãƒãƒ³ãƒ‰ï¼šm
ã‚¹ã‚¿ãƒƒã‚¯ã¯ç©ºã§ã™ã€‚
ã‚³ãƒãƒ³ãƒ‰ï¼ša
å…¥åŠ›ã¯i,d,m,p,qã®ã„ãšã‚Œã‹ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚
ã‚³ãƒãƒ³ãƒ‰ï¼ši
å…¥åŠ›ãƒ‡ãƒ¼ã‚¿ï¼š1996
ã‚³ãƒãƒ³ãƒ‰ï¼ši
å…¥åŠ›ãƒ‡ãƒ¼ã‚¿ï¼š8
ã‚³ãƒãƒ³ãƒ‰ï¼ši
å…¥åŠ›ãƒ‡ãƒ¼ã‚¿ï¼š2
ã‚³ãƒãƒ³ãƒ‰ï¼šp
2, 8, 1996, 
ã‚³ãƒãƒ³ãƒ‰ï¼šd
ã‚³ãƒãƒ³ãƒ‰ï¼šp
8, 1996, 
ã‚³ãƒãƒ³ãƒ‰ï¼ši
å…¥åŠ›ãƒ‡ãƒ¼ã‚¿ï¼š9
ã‚³ãƒãƒ³ãƒ‰ï¼šm
å‰Šé™¤æ•°ï¼š2
ã‚³ãƒãƒ³ãƒ‰ï¼šp
1996, 
ã‚³ãƒãƒ³ãƒ‰ï¼šm
å‰Šé™¤æ•°ï¼š2
ã‚¹ã‚¿ãƒƒã‚¯ãŒç©ºã«ãªã‚Šã¾ã—ãŸã€‚
ã‚³ãƒãƒ³ãƒ‰ï¼šq
bash-3.2$ exit
exit

Script done on Wed Nov 18 22:27:05 2015
